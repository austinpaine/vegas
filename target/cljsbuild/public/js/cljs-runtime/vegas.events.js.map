{"version":3,"sources":["vegas/events.cljs"],"mappings":";AASA,AAAA,AAACA,AAEC,AAAAC,AAAKG;AAAL,AAAA,AAAAF,AAAAD;AAAA,AAAAE,AAAAD,AAAA,AAAA,AAASG;AAAT,AAAAF,AAAAD,AAAA,AAAA,AAAWI;AAAX,AACE,AAAMC,AAAU,AAAA,AAAeH;AACzBI,AAAU,AAAA,AAACC,AAAMH,AACM,AAACI,AAAsB,AAAA,AAAcH,AAAWD;AAF7E,AAGE,AAAA,AAACG,AAAML,AAAiBI;;AAE9B,AAAA,AAACG,AAEC,AAAAC;AAAA,AAAA,AAAAC,AAAAD;AAAAE,AAAA,AAAAC,AAAAF;AAAAG,AAAA,AAAAC,AAAAH;AAAAA,AAAA,AAAAI,AAAAJ;AAAAE,AAAMI;AAAND,AAAAL;AAAA,AAAAX,AAAAgB,AAAA,AAAA,AAAWE;AAAX,AAAAlB,AAAAgB,AAAA,AAAA,AAAkBG;AAAlB,AACE,AAACC,AAAeH,AAAEC,AAAOC;;AAE7B,AAAA,AAACE,AAEC,AAAAC,AAAKpB;AAAL,AAAA,AAAAqB,AAAAD;AAAA,AAAAtB,AAAAuB,AAAA,AAAA,AAAQrB;AAAR,AAAAF,AAAAuB,AAAA,AAAA,AAAUC;AAAV,AAAAxB,AAAAuB,AAAA,AAAA,AAAkBL;AAAlB,AAAAlB,AAAAuB,AAAA,AAAA,AAAyBJ;AAAzB,AAAA,AAAA,AAAA,AACyBK,AAAQN,AAAOC;;AAE1C,AAAA,AAACtB,AAEC,AAAA4B,AAAKxB;AAAL,AAAA,AAAAyB,AAAAD;AAAA,AAAAzB,AAAA0B,AAAA,AAAA,AAASxB;AAAT,AAAAF,AAAA0B,AAAA,AAAA,AAAWC;AAAX,AACE,AAAA,AAACrB,AAAML,AAAS0B;;AAEpB,AAAA,AAACN,AAEC,AAAKnB,AAAEA;AAAP,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAGiC,AAAC0B,AAAAA,AAAAA;;AAGpC,AAAA,AAAC/B,AAEC,AAAAgC,AAAK5B;AAAL,AAAA,AAAA6B,AAAAD;AAAA,AAAA7B,AAAA8B,AAAA,AAAA,AAAS5B;AAAT,AAAAF,AAAA8B,AAAA,AAAA,AAAWC;AAAX,AACE,AAAA,AAACzB,AAAML,AAAiB8B;;AAE5B,AAAA,AAACV,AAEC,AAAKnB,AAAEA;AAAP,AAAA,AAAA,AAAA,AAAA;;AASF,AAAA,AAAC8B,AAEC,AAAK/B,AAAGC;AAAR,AACE,AAAA,AAAID;;AAER,AAAA,AAAA,AAAA,AAAA,AAAC+B,AAGC,AAAKC,AAAM/B;AAAX,AACE,AAAA,AAAA,AAAA,AAAI+B;;AAER,AAAA,AAAA,AAAA,AAAA,AAACD,AAGC,AAAKC,AAAM/B;AAAX,AACE,AAAA,AAAA,AAAA,AAAI+B;;AAER,AAAA,AAACD,AAEC,AAAK/B,AAAGC;AAAR,AACE,AAAA,AAAOD;;AAEX,AAAA,AAAC+B,AAEC,AAAK/B,AAAGC;AAAR,AACE,AAAA,AAAeD","names":["re_frame.core.reg_event_db","p__53293","vec__53294","cljs.core.nth","db","_","match","old-match","new-match","cljs.core.assoc","reitit.frontend.controllers/apply-controllers","re-frame.core/reg-fx","p__53297","vec__53298","seq__53299","cljs.core/seq","first__53300","cljs.core/first","cljs.core/next","vec__53301","k","params","query","reitit.frontend.easy.push_state","re_frame.core.reg_event_fx","p__53304","vec__53305","url-key","p__53308","vec__53309","docs","ajax.core/raw-response-format","p__53312","vec__53313","error","re_frame.core.reg_sub","route"],"sourcesContent":["(ns vegas.events\r\n  (:require\r\n    [re-frame.core :as rf]\r\n    [ajax.core :as ajax]\r\n    [reitit.frontend.easy :as rfe]\r\n    [reitit.frontend.controllers :as rfc]))\r\n\r\n;;dispatchers\r\n\r\n(rf/reg-event-db\r\n  :common/navigate\r\n  (fn [db [_ match]]\r\n    (let [old-match (:common/route db)\r\n          new-match (assoc match :controllers\r\n                                 (rfc/apply-controllers (:controllers old-match) match))]\r\n      (assoc db :common/route new-match))))\r\n\r\n(rf/reg-fx\r\n  :common/navigate-fx!\r\n  (fn [[k & [params query]]]\r\n    (rfe/push-state k params query)))\r\n\r\n(rf/reg-event-fx\r\n  :common/navigate!\r\n  (fn [_ [_ url-key params query]]\r\n    {:common/navigate-fx! [url-key params query]}))\r\n\r\n(rf/reg-event-db\r\n  :set-docs\r\n  (fn [db [_ docs]]\r\n    (assoc db :docs docs)))\r\n\r\n(rf/reg-event-fx\r\n  :fetch-docs\r\n  (fn [_ _]\r\n    {:http-xhrio {:method          :get\r\n                  :uri             \"/docs\"\r\n                  :response-format (ajax/raw-response-format)\r\n                  :on-success       [:set-docs]}}))\r\n\r\n(rf/reg-event-db\r\n  :common/set-error\r\n  (fn [db [_ error]]\r\n    (assoc db :common/error error)))\r\n\r\n(rf/reg-event-fx\r\n  :page/init-home\r\n  (fn [_ _]\r\n    {:dispatch [:fetch-docs]}))\r\n\r\n\r\n\r\n\r\n\r\n;;subscriptions\r\n\r\n(rf/reg-sub\r\n  :common/route\r\n  (fn [db _]\r\n    (-> db :common/route)))\r\n\r\n(rf/reg-sub\r\n  :common/page-id\r\n  :<- [:common/route]\r\n  (fn [route _]\r\n    (-> route :data :name)))\r\n\r\n(rf/reg-sub\r\n  :common/page\r\n  :<- [:common/route]\r\n  (fn [route _]\r\n    (-> route :data :view)))\r\n\r\n(rf/reg-sub\r\n  :docs\r\n  (fn [db _]\r\n    (:docs db)))\r\n\r\n(rf/reg-sub\r\n  :common/error\r\n  (fn [db _]\r\n    (:common/error db)))\r\n"]}